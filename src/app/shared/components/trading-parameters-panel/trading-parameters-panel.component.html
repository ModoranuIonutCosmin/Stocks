<div *ngIf="this.fullyLoaded">
  <form class="tradingInputsForm" [formGroup]="this.orderDetails">


    <main class="dialog">
      <header class="headerRibbon">
        <h1>Opening {{this.isBuyOrder ? 'BUY' : 'SELL'}} position for {{companyModel.ticker}}</h1>

        <button mat-icon-button aria-label="close dialog" mat-dialog-close>
          <mat-icon>close</mat-icon>
        </button>
      </header>


      <div class= "mainContent">
        <div class ="avatarInfo">
          <img src="{{companyModel.urlLogo}}"/>
          <div>
            <h2>{{companyModel.ticker}}</h2>
            <p>{{companyModel.name}}.</p>
          </div>
          <span>{{tradingParameters.currentPrice}}</span>
          <p>{{tradingParameters.trend}}%</p>
        </div>
      </div>


      <label>
        Amount:
      </label>
      <app-numbers-only-spinbox [controlName]="'investedAmount'"
                                [parentForm] = "this.orderDetails"
                                [maxValue]=this.availableFunds [minValue]=1
                                [step]=this.investedStep
                                (valueChange)="this.changeInvestedAmount($event)"
      ></app-numbers-only-spinbox>
      <app-numbers-only-spinbox [controlName]="'stopLoss'"
                                [parentForm] = "this.orderDetails"
                                [maxValue]=this.investedAmount [minValue]=1
                                [step]=this.investedStep
                                (valueChange)="this.changeStopLossAmount($event)"
      ></app-numbers-only-spinbox>
      <app-numbers-only-spinbox [controlName]="'takeProfit'"
                                [parentForm] = "this.orderDetails"
                                [maxValue]=this.investedAmount [minValue]=1
                                [step]=this.investedStep
                                (valueChange)="this.changeTakeProfitAmount($event)"
      ></app-numbers-only-spinbox>

      <!--  <button type="button" (click) = "check()">ssss</button>-->

      <mat-button-toggle-group  (change)="onLeverageChange($event.value)">
        <mat-button-toggle value="1" aria-label="1x">
          1x
        </mat-button-toggle>
        <mat-button-toggle value="2" aria-label="2x">
          2x
        </mat-button-toggle>
        <mat-button-toggle value="5" aria-label="5x">
          5x
        </mat-button-toggle>
      </mat-button-toggle-group>



    </main>
  </form>


  <div *ngIf="tradingParameters.weekdayTax > 0" class="feesSummary">
    <p>Weekday tax <strong>{{tradingParameters.weekdayTax}}</strong></p>
    <p>Weekend tax <strong>{{tradingParameters.weekendTax}}</strong></p>
    <p>Percentage exposed<strong>{{tradingParameters.percentageExposed}}</strong></p>
  </div>

  <p>Units paid: <strong>{{tradingParameters.unitsPaid}}</strong></p>
  <p>{{errorMessage}}</p>

  <button mat-flat-button color="primary"
          [disabled] = "errorMessage !== ''"
          (click) = "placeOrder()">
    Proceed
  </button>
</div>


<mat-spinner *ngIf="!fullyLoaded"></mat-spinner>

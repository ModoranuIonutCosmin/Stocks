<main class="suggestions">
    <section>
        <div class="trades">

            <header>
                <h1>Suggested trades</h1>
            </header>
            <form [formGroup]="this.form" class="filters">
                <mat-form-field appearance="fill">
                    <mat-label>Trades time interval</mat-label>
                    <mat-select formControlName="interval" (selectionChange)="this.intervalChanged($event)">
                        <mat-option *ngFor="let interval of this.INTERVAL_LIST" [value]="interval">{{interval}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>

                <mat-form-field appearance="fill">
                    <mat-label>Trades time interval</mat-label>
                    <mat-select formControlName="algorithm" (selectionChange)="this.algorithmChanged($event)">
                        <mat-option *ngFor="let alg of this.ALGS_LIST" [value]="alg">{{alg}}</mat-option>
                    </mat-select>
                </mat-form-field>
            </form>

            <div class="noEntriesHint" *ngIf="this.tradeSuggestions.length == 0">
                <p>There are no suggestions generated by this algorithm.</p>
            </div>
        </div>


        <table mat-table 
            *ngIf="this.tradeSuggestions.length > 0"
        [dataSource]="this.tradeSuggestions"
         id="tradesTable">

            <!-- Company Ticker Column -->
            <ng-container matColumnDef="CompanyData">
                <th mat-header-cell *matHeaderCellDef> Company </th>
                <td mat-cell *matCellDef="let element">{{element.ticker}}</td>
            </ng-container>

            <!-- Position type -->
            <ng-container matColumnDef="PositionType">
                <th mat-header-cell *matHeaderCellDef> Trade type </th>
                <td mat-cell *matCellDef="let element"> {{element.openRequest.isBuy ? 'BUY' : 'SELL'}} </td>
            </ng-container>

            <!-- Initial Price Column -->
            <ng-container matColumnDef="InitialPrice">
                <th mat-header-cell *matHeaderCellDef> Current Price </th>
                <td mat-cell *matCellDef="let element"> {{element.currentPrice | number: '1.2-2'}} </td>
            </ng-container>

            <!-- Final Price Column -->
            <ng-container matColumnDef="FinalPrice">
                <th mat-header-cell *matHeaderCellDef> Expected Price </th>
                <td mat-cell *matCellDef="let element"> {{element.expectedPrice | number: '1.2-2'}} </td>
            </ng-container>

            <!-- Profit% Column -->
            <ng-container matColumnDef="ProfitPercentage">
                <th mat-header-cell *matHeaderCellDef> Profit% </th>
                <td mat-cell *matCellDef="let element">+{{this.profitValuePercentage(element) | number: '1.1-3'}}</td>
            </ng-container>

            <!-- Scheduled open Column -->
            <ng-container matColumnDef="Start">
                <th mat-header-cell *matHeaderCellDef> Start date </th>
                <td mat-cell *matCellDef="let element">{{this.element.openRequest.scheduledOpen | date: 'short'}}</td>
            </ng-container>


            <!-- Scheduled close Column -->
            <ng-container matColumnDef="Final">
                <th mat-header-cell *matHeaderCellDef> End date </th>
                <td mat-cell *matCellDef="let element">{{this.element.openRequest.scheduledClose | date: 'short'}}</td>
            </ng-container>


            <!-- Action Column -->
            <ng-container matColumnDef="Action">
                <th mat-header-cell *matHeaderCellDef></th>
                <td mat-cell *matCellDef="let element"><button mat-button type="button"
                    mat-raised-button color="primary"
                    [disabled]="this.element.disabled == true"
                    (click)="this.openConfirmationDialog(element)"> Schedule</button></td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>



        <!-- <app-trade-suggest [tradeSuggestion]="trade" *ngFor="let trade of this.tradeSuggestions"></app-trade-suggest> -->
    </section>
</main>